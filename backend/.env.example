# ISMS Backend Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# REQUIRED - Core Configuration
# =============================================================================

# PostgreSQL Database Connection
# Format: postgresql://USER:PASSWORD@HOST:PORT/DB?schema=public
# Example: postgresql://postgres:password@localhost:5432/isms_db?schema=public
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/isms_db?schema=public

# Node Environment: development, staging, or production
NODE_ENV=development

# Server Port (default: 4000)
PORT=4000

# Seed Data Scope
# - "none": No seeding (production default)
# - "reference": Seed only catalog/reference data (classifications, controls, legislation, etc.)
# - "full": Reference data + demo data (development default)
SEED_SCOPE=full

# =============================================================================
# REQUIRED - Authentication (Azure AD / Entra ID)
# =============================================================================

# Azure AD Tenant ID (Directory ID from Azure Portal)
AUTH_TENANT_ID=

# Azure AD Application (Client) ID
AUTH_CLIENT_ID=

# Azure AD Client Secret (from Certificates & secrets in Azure Portal)
AUTH_CLIENT_SECRET=

# OAuth Redirect URI (must match Azure App Registration)
# Development: http://localhost:3000
# Production: https://trust.paythru.com (or your production domain)
AUTH_REDIRECT_URI=http://localhost:3000

# Allowed Email Domain (default: paythru.com)
# Only users with emails from this domain can authenticate
AUTH_ALLOWED_EMAIL_DOMAIN=paythru.com

# =============================================================================
# REQUIRED - CORS Configuration
# =============================================================================

# Comma-separated list of allowed origins for CORS
# Supports wildcard patterns like: https://trust.*.paythru.com
# Example: https://trust.paythru.com,https://trust.staging.paythru.com
# Or use wildcard: https://trust.*.paythru.com
CORS_TRUST_CENTER_ORIGINS=http://localhost:3000

# =============================================================================
# REQUIRED - Trust Center Configuration
# =============================================================================

# JWT Secret for Trust Center authentication (minimum 32 characters)
# Generate a strong random secret for production
# Example: openssl rand -base64 32
TRUST_CENTER_JWT_SECRET=

# JWT Token Expiry (default: 24h)
TRUST_CENTER_JWT_EXPIRY=24h

# Maximum file size for uploads in MB (default: 50)
TRUST_CENTER_MAX_FILE_SIZE_MB=50

# Download token expiry (default: 1h)
TRUST_CENTER_DOWNLOAD_TOKEN_EXPIRY=1h

# =============================================================================
# OPTIONAL - SharePoint Integration
# =============================================================================

# SharePoint Site ID
SHAREPOINT_SITE_ID=

# SharePoint Drive ID (Document Library ID)
SHAREPOINT_DRIVE_ID=

# =============================================================================
# OPTIONAL - Confluence Integration
# =============================================================================

# Confluence Base URL
# Example: https://your-domain.atlassian.net
CONFLUENCE_BASE_URL=

# Confluence Username
CONFLUENCE_USERNAME=

# Confluence API Token (from Account Settings → Security → API tokens)
CONFLUENCE_API_TOKEN=

# =============================================================================
# OPTIONAL - Azure App-Only Authentication (for Trust Center)
# =============================================================================

# If different from AUTH_CLIENT_ID and AUTH_CLIENT_SECRET
# If not set, will use AUTH_CLIENT_ID and AUTH_CLIENT_SECRET
AZURE_APP_CLIENT_ID=
AZURE_APP_CLIENT_SECRET=
AZURE_TENANT_ID=

# =============================================================================
# OPTIONAL - LLM Configuration (for similarity analysis)
# =============================================================================

# LLM Provider (default: ollama)
LLM_PROVIDER=ollama

# LLM Base URL (default: http://localhost:11434)
LLM_BASE_URL=http://localhost:11434

# LLM Model Name (default: llama2)
LLM_MODEL=llama2

# Similarity Threshold (default: 70)
LLM_SIMILARITY_THRESHOLD=70

# =============================================================================
# OPTIONAL - Email Service Configuration
# =============================================================================

# SMTP Host
EMAIL_SMTP_HOST=

# SMTP Port (default: 587)
EMAIL_SMTP_PORT=587

# SMTP Username
EMAIL_SMTP_USER=

# SMTP Password
EMAIL_SMTP_PASS=

# From Email Address
EMAIL_FROM=
